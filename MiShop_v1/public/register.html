<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="author" content="order by dede58.com" />
	<title>用户注册</title>
	<link rel="stylesheet" type="text/css" href="./css/login.css">
</head>

<body>
	<form method="post" action="/user/reg">
		<div class="regist">
			<div class="regist_center">
				<div class="regist_top">
					<div class="left fl">会员注册</div>
					<div class="right fr"><a href="./index.html" target="_self">小米商城</a></div>
					<div class="clear"></div>
					<div class="xian center"></div>
				</div>
				<div class="regist_main center">
					<div class="username">用&nbsp;&nbsp;户&nbsp;&nbsp;名:&nbsp;&nbsp;<input class="shurukuang" type="text"
							name="uname" id="uname" onblur="showname()" onfocus="checkname()" placeholder="请输入你的用户名" /><span
							id="uname_msg">请不要输入汉字</span></div>
					<div class="username">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码:&nbsp;&nbsp;<input class="shurukuang"
							type="password" name="upwd" id="upwd" onblur="showupwd()" onfocus="checkupwd()"
							placeholder="请输入你的密码" /><span id="upwd_msg">请输入6位以上字符</span></div>

					<div class="username">确认密码:&nbsp;&nbsp;<input class="shurukuang" type="password" id="reupwd"
							onblur="showreupwd()" onfocus="checkreupwd()" placeholder="请输入你的密码" placeholder="请确认你的密码" /><span
							id="reupwd_msg">两次密码要输入一致哦</span></div>
					<div class="username">手&nbsp;&nbsp;机&nbsp;&nbsp;号:&nbsp;&nbsp;<input class="shurukuang" type="text"
							name="phone" id="phone" onblur="showphone()" onfocus="checkphone()" placeholder="请填写正确的手机号" /><span id="phone_msg">填写下手机号吧，方便我们联系您！</span></div>
					<div class="username">
						<div class="left fl">验&nbsp;&nbsp;证&nbsp;&nbsp;码:&nbsp;&nbsp;<input class="yanzhengma" type="text"
								placeholder="请输入验证码" onblur="showyzm()" id="yzm" /></div>
						<div class="right fl"><img src="./image/yanzhengma.jpg"></div>
						<span class="msg" id="yzm_msg"></span>
						<div class="clear"></div>
					</div>
				</div>
				<div class="regist_submit">
					<input class="submit" type="submit" onclick="reg()" value="立即注册">
				</div>
			</div>
		</div>
	</form>
</body>
<script>
	var state = false
	function checkname() {
		uname_msg.innerHTML = "输入6-12位字符或数字"
	}

	function showname() {
		var reg = /^[\w]{6,12}$/;
		if (!uname.value) {
			uname_msg.innerHTML = "用户名不能为空"
		} else if (!reg.test(uname.value)) {
			uname_msg.innerHTML = "用户名格式不正确"
		} else {
			uname_msg.innerHTML = "这个名字真不错"
			state = true
		}
	}
	function checkphone() {
		phone_msg.innerHTML = "留下您的电话吧"
	}

	function showphone() {
		var reg = /^1[3456789]\d{9}$/;
		if (!phone.value) {
			phone_msg.innerHTML = "用户名不能为空"
		} else if (!reg.test(phone.value)) {
			phone_msg.innerHTML = "电话是11位哦"
		} else {
			phone_msg.innerHTML = "电话记下咯"
			state = true
		}
	}

	function checkupwd() {
		upwd_msg.innerHTML = "输入6-12位字符或数字"
	}

	function showupwd() {
		var reg = /^[\w]{6,8}$/;
		if (!upwd.value) {
			upwd_msg.innerHTML = "密码不能为空"
		} else if (!reg.test(upwd.value)) {
			upwd_msg.innerHTML = "密码格式错误"
		} else {
			upwd_msg.innerHTML = "这个密码将无法被破解"
			state = true
		}
	}

	function checkreupwd() {
		reupwd_msg.innerHTML = "两次密码要输入一致哦"
	}

	function showreupwd() {
		if (reupwd.value === upwd.value) {
			reupwd_msg.innerHTML = "这个密码将无法被破解"
			state = true
		} else {
			reupwd_msg.innerHTML = "密码输入不一致"
		}
	}

	function showyzm() {
		var reg = /^[r][m][c][c]$/;
		if (!reg.test(yzm.value)) {
			yzm_msg.innerHTML = "验证码输入错误"
		} else {
			yzm_msg.innerHTML = "验证码正确"
			state = true
		}
	}

	function reg() {
		if(state){
			document.cookie=uname.value
			alert("注册成功")
		}else{
			alert("注册失败")
		}
	}
</script>

</html>